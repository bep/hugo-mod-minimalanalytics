{{ if not site.Params.minimalanalytics.tracking_id }}
  {{ errorf "no minimalanalytics.tracking_id is defined in site params" }}
{{ else }}
  {{- $shims := dict "@minimal-analytics/shared" "js/ga4-shared" "@minimal-analytics/ga4" "js/ga4" -}}
  {{- $opts := dict "minify" (not hugo.IsDevelopment) "shims" $shims "params" site.Params.minimalanalytics -}}
  {{- $js := resources.Get "js/minimalanalytics/index.js" | js.Build $opts -}}
  {{ if hugo.IsDevelopment }}
    <script src="{{ $js.RelPermalink }}"></script>
  {{ else }}
    {{ $js = $js | fingerprint }}
    <script src="{{ $js.RelPermalink }}"></script>
  {{ end }}
{{ end }}
